ksb_1_slot = {
	slot = 1
	generic = no
	ai = yes
	has_country_shield = yes
	potential = {
		OR = {
			AND = {
				was_tag = KSB
				tag = SEV
			}
			AND = {
				was_tag = KSB
				tag = SLV
			}
			tag = KSB
		}
	}

	ksb_retake_rujana = {
		icon = mission_norse_faith
		position = 1
		provinces_to_highlight = {
			province_id = 4745
			NOT = { owned_by = root } 
		}

		trigger = { owns = 4745 } 

		effect = {
			4745 = {
				add_province_modifier = {
					name = "ksb_upgrade_temple"
					duration = 1825
				}
			}
		}
	}

	ksb_restore_worship = {
		icon = mission_hands_praying
		position = 3
		required_missions = { ksb_retake_rujana } 
		provinces_to_highlight = {  } 

		trigger = { NOT = { has_estate_privilege = estate_church_pf_ksb_corrupt_church }  } 

		effect = {
			custom_tooltip = ksb_reformed_the_church
			set_country_flag = ksb_reformed_church
		}
	}
}
ksb_2_slot = {
	slot = 2
	generic = no
	ai = yes
	has_country_shield = yes
	potential = {
		OR = {
			AND = {
				was_tag = KSB
				tag = SEV
			}
			AND = {
				was_tag = KSB
				tag = SLV
			}
			tag = KSB
		}
	}

	ksb_smash_the_saxons = {
		icon = mission_conquer_5_states
		position = 1
		provinces_to_highlight = {
			area = vorpommern_area
			NOT = { owned_by = ROOT } 
			NOT = { province_id = 4745 } 
		}

		trigger = {
			1858 = { owned_by = ROOT } 
			2994 = { owned_by = ROOT } 
			47 = { owned_by = ROOT } 
		}

		effect = { vorpommern_area = { add_nationalism = -15 }  } 
	}

	ksb_the_polabians = {
		icon = mission_noble_council
		position = 2
		required_missions = {
			ksb_smash_the_saxons
			ksb_retake_rujana
		}
		provinces_to_highlight = {
			culture = polabian
			NOT = { owned_by = ROOT } 
		}

		trigger = {
			owns_all_provinces = { culture = polabian } 
			accepted_culture = polabian
		}

		effect = { country_event = { id = pf_ksb_events.12 }  } 
	}

	ksb_push_borderlands = {
		icon = claim_the_borderlands
		position = 4
		required_missions = { ksb_the_polabians } 
		provinces_to_highlight = {
			OR = {
				area = northern_saxony_area
				area = south_saxony_area
				area = mittelmark_area
				area = mecklenburg_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT } 
		}

		trigger = {
			mecklenburg_area = {
				country_or_non_sovereign_subject_holds = ROOT
				type = all
			}
			south_saxony_area = {
				country_or_non_sovereign_subject_holds = ROOT
				type = all
			}
			mittelmark_area = {
				country_or_non_sovereign_subject_holds = ROOT
				type = all
			}
			northern_saxony_area = {
				country_or_non_sovereign_subject_holds = ROOT
				type = all
			}
		}

		effect = {
			if = {
				limit = { POB = { is_subject_of = ROOT }  } 
				custom_tooltip = ksb_yes_polabia
			}
			else = { custom_tooltip = ksb_no_polabia } 
			tooltip = { country_event = { id = pf_ksb_events.13 }  } 
			custom_tooltip = empty_line_tt
			if = {
				limit = { NOT = { POB = { is_subject_of = ROOT }  }  } 
				custom_tooltip = ksb_otherwise_yes
			}
			else = { custom_tooltip = ksb_otherwise_no } 
			tooltip = {
				add_prestige = 25
				mittelmark_area = { add_nationalism = -10 } 
				south_saxony_area = { add_nationalism = -10 } 
				northern_saxony_area = { add_nationalism = -10 } 
				mecklenburg_area = { add_nationalism = -10 } 
			}
			hidden_effect = {
				if = {
					limit = { POB = { is_subject_of = ROOT }  } 
					country_event = { id = pf_ksb_events.13 } 
				}
				else = {
					add_prestige = 25
					mittelmark_area = { add_nationalism = -10 } 
					south_saxony_area = { add_nationalism = -10 } 
					northern_saxony_area = { add_nationalism = -10 } 
					mecklenburg_area = { add_nationalism = -10 } 
				}
			}
		}
	}
}
ksb_3_slot = {
	slot = 3
	generic = no
	ai = yes
	has_country_shield = yes
	potential = {
		OR = {
			AND = {
				was_tag = KSB
				tag = SEV
			}
			AND = {
				was_tag = KSB
				tag = SLV
			}
			tag = KSB
		}
	}

	ksb_rule_silesia = {
		icon = mission_eastern_european_city
		position = 2
		required_missions = { ksb_new_slavic_power } 
		provinces_to_highlight = {
			OR = {
				area = lusatia_area
				area = silesia_area
				owned_by = SIL
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT } 
		}

		trigger = {
			OR = {
				AND = {
					SIL = {
						alliance_with = ROOT
						has_opinion = {
							who = ROOT
							value = 190
						}
					}
				}
				AND = {
					silesia_area = {
						country_or_non_sovereign_subject_holds = ROOT
						type = all
					}
					SIL = { exists = no } 
				}
			}
			lusatia_area = {
				country_or_non_sovereign_subject_holds = ROOT
				type = all
			}
		}

		effect = {
			if = {
				limit = { SIL = { alliance_with = ROOT }  } 
				custom_tooltip = ksb_yes_vassalize_sil
			}
			else = { custom_tooltip = ksb_no_vassalize_sil } 
			custom_tooltip = empty_line_tt
			if = {
				limit = { SIL = { exists = no }  } 
				custom_tooltip = ksb_otherwise_yes
			}
			else = { custom_tooltip = ksb_otherwise_no } 
			tooltip = {
				add_country_modifier = {
					name = "ksb_silesian_iron"
					duration = 7300
				}
			}
			erzgebirge_area = { add_permanent_claim = ROOT } 
			bohemia_area = { add_permanent_claim = ROOT } 
			hidden_effect = {
				if = {
					limit = { SIL = { alliance_with = ROOT }  } 
					SIL = { set_country_flag = ksb_gonna_be_vassalized } 
					set_country_flag = ksb_allied_sil
				}
				else = {
					add_country_modifier = {
						name = "ksb_silesian_iron"
						duration = 7300
					}
				}
			}
		}
	}

	ksb_lands_of_czech = {
		icon = boh_humiliate_austria
		position = 3
		required_missions = {
			ksb_the_polabians
			ksb_rule_silesia
		}
		provinces_to_highlight = {
			OR = {
				area = bohemia_area
				area = erzgebirge_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT } 
		}

		trigger = {
			bohemia_area = {
				country_or_non_sovereign_subject_holds = ROOT
				type = all
			}
			erzgebirge_area = {
				country_or_non_sovereign_subject_holds = ROOT
				type = all
			}
		}

		effect = {
			266 = {
				change_culture = ceci
				change_religion = slavic_religion
				add_nationalism = -5
			}
			set_country_flag = ksb_converting_ceci_flag
			custom_tooltip = ksb_converting_to_czech_tt
		}
	}
}
ksb_4_slot = {
	slot = 4
	generic = no
	ai = yes
	has_country_shield = yes
	potential = {
		OR = {
			AND = {
				was_tag = KSB
				tag = SEV
			}
			AND = {
				was_tag = KSB
				tag = SLV
			}
			tag = KSB
		}
	}

	ksb_new_slavic_power = {
		icon = mission_the_polish_throne
		position = 1
		provinces_to_highlight = {  } 

		trigger = {
			if = {
				limit = {
					ai = no
				}
				army_size_percentage = 1
				num_of_generals = 2
			}
			else = {
				army_size_percentage = 0.75
			}
		}

		effect = {
			silesia_area = { add_permanent_claim = ROOT } 
			lusatia_area = { add_permanent_claim = ROOT } 
			podlasie_area = { add_permanent_claim = ROOT } 
			vorpommern_area = {
				add_permanent_claim = ROOT
			}
			278 = { add_permanent_claim = ROOT } 
		}
	}

	ksb_conquer_pinsk = {
		icon = mission_the_russian_tsardom
		position = 2
		required_missions = { ksb_new_slavic_power } 
		provinces_to_highlight = {
			OR = {
				area = podlasie_area
				province_id = 278
				owned_by = PNS
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT } 
		}

		trigger = {
			OR = {
				AND = {
					PNS = {
						alliance_with = ROOT
						has_opinion = {
							who = ROOT
							value = 190
						}
					}
				}
				AND = {
					podlasie_area = {
						country_or_non_sovereign_subject_holds = ROOT
						type = all
					}
					owns_or_non_sovereign_subject_of = 278
					PNS = { exists = no } 
				}
			}
		}

		effect = {
			if = {
				limit = { PNS = { alliance_with = ROOT }  } 
				custom_tooltip = ksb_yes_vassalize_pns
			}
			else = { custom_tooltip = ksb_no_vassalize_pns } 
			custom_tooltip = empty_line_tt
			if = {
				limit = { PNS = { exists = no }  } 
				custom_tooltip = ksb_otherwise_yes
				tooltip = { add_accepted_culture_or_dip_power = { culture = slavic_galician }  } 
			}
			else = {
				custom_tooltip = ksb_otherwise_no
				tooltip = { add_accepted_culture_or_dip_power = { culture = slavic_galician }  } 
			}
			hidden_effect = {
				if = {
					limit = { PNS = { alliance_with = ROOT }  } 
					PNS = { set_country_flag = ksb_gonna_be_vassalized } 
					set_country_flag = ksb_allied_pns
				}
				else = { add_accepted_culture_or_dip_power = { culture = slavic_galician }  } 
			}
		}
	}

	ksb_united_severoslavia = {
		icon = mission_placeholder
		position = 3
		required_missions = {
			ksb_rule_silesia
			ksb_conquer_pinsk
			ksb_protect_lechia
		}
		provinces_to_highlight = {  } 

		trigger = {
			prestige = 50
			custom_trigger_tooltip = { tooltip = ksb_requirements_change } 
			if = {
				limit = { has_country_flag = ksb_allied_pns } 
				alliance_with = PNS
				PNS = {
					has_opinion = {
						who = ROOT
						value = 190
					}
					all_core_province = { owned_by = PNS } 
				}
			}
			if = {
				limit = { has_country_flag = ksb_allied_sil } 
				alliance_with = SIL
				SIL = {
					has_opinion = {
						who = ROOT
						value = 190
					}
					all_core_province = { owned_by = SIL } 
				}
			}
			else = {
				poland_region = {
					country_or_non_sovereign_subject_holds = ROOT
					type = all
				}
			}
		}

		effect = {
			south_slavia_region = { add_permanent_claim = ROOT } 
			custom_tooltip = empty_line_tt
			if = {
				limit = { has_country_flag = ksb_allied_sil } 
				custom_tooltip = ksb_vassalize_silesia_yes_tt
			}
			else = { custom_tooltip = ksb_vassalize_pinsk_no_tt } 
			tooltip = { PNS = { country_event = { id = pf_ksb_events.15 }  }  } 
			custom_tooltip = empty_line_tt
			if = {
				limit = { has_country_flag = ksb_allied_sil } 
				custom_tooltip = ksb_vassalize_silesia_yes_tt
			}
			else = { custom_tooltip = ksb_vassalize_silesia_no_tt } 
			tooltip = { SIL = { country_event = { id = pf_ksb_events.15 }  }  } 
			custom_tooltip = empty_line_tt
			custom_tooltip = ksb_can_form_severoslavia_tt
			set_country_flag = ksb_can_form_severoslavia_flag
			hidden_effect = {
				if = {
					limit = { has_country_flag = ksb_allied_sil } 
					SIL = { country_event = { id = pf_ksb_events.15 }  } 
				}
				if = {
					limit = { has_country_flag = ksb_allied_sil } 
					PNS = { country_event = { id = pf_ksb_events.15 }  } 
				}
			}
		}
	}
}
ksb_5_slot = {
	slot = 5
	generic = no
	ai = yes
	has_country_shield = yes
	potential = {
		OR = {
			AND = {
				was_tag = KSB
				tag = SEV
			}
			AND = {
				was_tag = KSB
				tag = SLV
			}
			tag = KSB
		}
	}

	ksb_intervene_in_lechia = {
		icon = mission_pol_wallachia
		position = 1
		provinces_to_highlight = {  } 

		trigger = {
			manpower = 2
			treasury = 100
			OR = {
				AND = {
					if = {
						limit = { has_global_flag = lechia_succession_wars } 
						custom_trigger_tooltip = { tooltip = ksb_lechia_wars_begun_yes } 
					}
					else = { custom_trigger_tooltip = { tooltip = ksb_lechia_wars_begun_no }  } 
				}
				AND = {
					if = {
						limit = { KRA = { NOT = { has_ruler_flag = kra_caspar_rules_flag }  }  } 
						custom_trigger_tooltip = { tooltip = ksb_lechia_wars_averted_yes } 
					}
					else = { custom_trigger_tooltip = { tooltip = ksb_lechia_wars_averted_no }  } 
				}
			}
			hidden_trigger = {
				OR = {
					has_global_flag = lechia_succession_wars
					KRA = { NOT = { has_ruler_flag = kra_caspar_rules_flag }  } 
				}
			}
		}

		effect = {
			if = {
				limit = { has_global_flag = lechia_succession_wars } 
				custom_tooltip = ksb_if_lechia_civil_war_has_begun_yes_tt
			}
			else = { custom_tooltip = ksb_if_lechia_civil_war_has_begun_no_tt } 
			tooltip = { country_event = { id = pf_ksb_events.17 }  } 
			custom_tooltip = empty_line_tt
			if = {
				limit = { KRA = { NOT = { has_ruler_flag = kra_caspar_rules_flag }  }  } 
				custom_tooltip = ksb_if_lechia_civil_war_has_averted_yes_tt
			}
			else = { custom_tooltip = ksb_if_lechia_civil_war_has_averted_no_tt } 
			tooltip = {
				sandomierz_area = { add_permanent_claim = ROOT } 
				malopolska_area = { add_permanent_claim = ROOT } 
			}
			hidden_effect = {
				if = {
					limit = { has_global_flag = lechia_succession_wars } 
					country_event = { id = pf_ksb_events.17 } 
					set_country_flag = ksb_supported_lechia_wars
				}
				else_if = {
					limit = { KRA = { NOT = { has_ruler_flag = kra_caspar_rules_flag }  }  } 
					sandomierz_area = { add_permanent_claim = ROOT } 
					malopolska_area = { add_permanent_claim = ROOT } 
					set_country_flag = ksb_averted_lechia_wars
				}
			}
		}
	}

	ksb_protect_lechia = {
		icon = mission_pol_throne_bohemia
		position = 2
		required_missions = { ksb_intervene_in_lechia } 
		provinces_to_highlight = {
			if = {
				limit = {
					root = {
						AND = {
							has_country_flag = ksb_supported_lechia_wars
							has_country_flag = ksb_supported_lechia
						}
					}
				}
				is_capital_of = POL
			}
			else_if = {
				limit = {
					root = {
						AND = {
							has_country_flag = ksb_supported_lechia_wars
							has_country_flag = ksb_supported_krakow
						}
					}
				}
				is_capital_of = KRA
			}
			else = {
				OR = {
					area = malopolska_area
					area = sandomierz_area
				}
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT } 
		}

		trigger = {
			custom_trigger_tooltip = { tooltip = ksb_requirements_change } 
			if = {
				limit = { has_country_flag = ksb_supported_lechia_wars } 
				OR = {
					alliance_with = KRA
					alliance_with = POL
				}
			}
			else = {
				sandomierz_area = {
					country_or_non_sovereign_subject_holds = ROOT
					type = all
				}
				malopolska_area = {
					country_or_non_sovereign_subject_holds = ROOT
					type = all
				}
			}
		}

		effect = {
			custom_tooltip = pf_ksb_effects_change_tt
			if = {
				limit = {
					has_country_flag = ksb_supported_lechia_wars
					OR = { alliance_with = KRA } 
				}
				vassalize = KRA
			}
			else_if = {
				limit = {
					has_country_flag = ksb_supported_lechia_wars
					OR = { alliance_with = POL } 
				}
				vassalize = POL
			}
			else = {
				distribute_base_dev_to_provinces = {
					num = 3
					amount = 1
					trigger = "area = malopolska_area"
					type = manpower
					tooltip = PF_KSB_DEV_IN_MALOPOLSKA_TT
				}
				distribute_base_dev_to_provinces = {
					num = 3
					amount = 1
					trigger = "area = sandomierz_area"
					type = manpower
					tooltip = PF_KSB_DEV_IN_SANDOMIERZ_TT
				}
			}
		}
	}

	ksb_conquer_lithuania = {
		icon = mission_conquer_lithuania
		position = 3
		required_missions = { ksb_conquer_pinsk } 
		provinces_to_highlight = {
			OR = {
				area = samogitia_area
				area = lithuania_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT } 
		}

		trigger = {
			samogitia_area = {
				country_or_non_sovereign_subject_holds = ROOT
				type = all
			}
			lithuania_area = {
				OR = {
					country_or_non_sovereign_subject_holds = ROOT
					owned_by = PNS
				}
				type = all
			}
		}

		effect = { baltic_region = { add_permanent_claim = ROOT }  } 
	}

	ksb_lords_of_baltic = {
		icon = mission_conquer_baltic_region
		position = 4
		required_missions = { ksb_conquer_lithuania } 
		provinces_to_highlight = {
			region = baltic_region
			NOT = { country_or_non_sovereign_subject_holds = ROOT } 
		}

		trigger = {
			baltic_region = {
				country_or_non_sovereign_subject_holds = ROOT
				type = all
				calc_true_if = {
					amount = 5
					religion = ROOT
				}
			}
		}

		effect = { ZLT = { every_owned_province = { add_permanent_claim = ROOT }  }  } 
	}

	ksb_end_zilant_raids = {
		icon = mjz_for_the_horde
		position = 5
		required_missions = { ksb_lords_of_baltic } 
		provinces_to_highlight = {
			owned_by = ZLT
			province_id = 4242
			NOT = { country_or_non_sovereign_subject_holds = ROOT } 
		}

		trigger = {
			ZLT = { exists = no } 
			4242 = { country_or_non_sovereign_subject_holds = ROOT } 
		}

		effect = {
			white_ruthenia_area = { add_permanent_claim = ROOT } 
			smolensk_area = { add_permanent_claim = ROOT } 
			pskov_area = { add_permanent_claim = ROOT } 
		}
	}
}
sevksb_1_branch = {
	slot = 1
	generic = no
	ai = yes
	has_country_shield = yes
	potential = {
		OR = {
			AND = {
				was_tag = KSB
				tag = SEV
			}
			AND = {
				was_tag = KSB
				tag = SLV
			}
		}
	}

	sev_svetovids_most_faithful = {
		icon = mission_placeholder
		position = 5
		required_missions = { ksb_restore_worship } 
		provinces_to_highlight = {  } 

		trigger = {
			has_estate_privilege = estate_church_pf_ksb_head_of_cult
			estate_loyalty = {
				estate = estate_church
				loyalty = 60
			}
			4745 = {
				has_great_project = {
					type = svetovids_temple
					tier = 2
				}
			}
			legitimacy = 100
		}

		effect = {
			change_government = theocracy
			add_government_reform = pf_svetovid_theocracy
		}
	}

	sev_convert_germania = {
		icon = mission_placeholder
		position = 6
		required_missions = { sev_svetovids_most_faithful } 
		provinces_to_highlight = {
			region = north_german_region
			NOT = { religion = ROOT } 
			owned_by = ROOT
		}

		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 20
				region = north_german_region
				religion = slavic_religion
			}
		}

		effect = {
			add_government_power = {
				mechanic_type = pf_svetovid_dedication_mechanic
				power_type = pf_svetovid_dedication
				value = 25
			}
			add_stability_or_adm_power = yes
			add_estate_church_loyalty_effect = yes
		}
	}

	sev_gdansk = {
		icon = mission_pol_embellish_gdansk
		position = 8
		provinces_to_highlight = {  
			province_id = 43
		} 

		trigger = {  
			43 = {
				grown_by_development = 20
				province_has_current_tech_fort_trigger = yes
				has_dock_building_trigger = yes
			}
		} 

		effect = {  
			define_advisor = {
				type = trader
				skill = 2
				cost_multiplier = -0.66
			}
			43 = {
				upgrade_center_of_trade = yes
			}
		} 
	}

	sev_protect_coast = {
		icon = pf_fertile_crescent
		position = 9
		required_missions = { sev_gdansk } 
		provinces_to_highlight = {  
			AND = {
				OR = {
					region = poland_region
					region = baltic_region
				}
				has_port = yes
				NOT = { has_coast_defense_building_trigger = yes }
			}
			owned_by = ROOT
		} 

		trigger = {  
			num_of_owned_provinces_with = {
				value = 8
				OR = {
					region = poland_region
					region = baltic_region
				}
				has_port = yes
				has_coast_defense_building_trigger = yes
			}
		} 

		effect = {  
			custom_tooltip = ksb_to_be_added_tt
			#when norse raid wars get added block you from getting decced on
			add_country_modifier = {
				name = ksb_safe_shores
				duration = 7300
			}
		} 
	}

	sev_baltic_monopolies = {
		icon = mission_baltic_empire
		position = 11
		required_missions = { sev_protect_coast } 
		provinces_to_highlight = {  } 

		trigger = {  
			trade_company_baltic_sea = {
				is_strongest_trade_power = ROOT
			}
			num_ships_protecting_trade = 30
		} 

		effect = {  
			create_units_of_type = {
				amount = 10
				province = 43
				unit_type = carrack
			}
		} 
	}
}
sevksb_2_branch = {
	slot = 2
	generic = no
	ai = yes
	has_country_shield = yes
	potential = {
		OR = {
			AND = {
				was_tag = KSB
				tag = SEV
			}
			AND = {
				was_tag = KSB
				tag = SLV
			}
		}
	}

	sev_to_the_rhine = {
		icon = mission_se_along_the_river
		position = 6
		required_missions = { ksb_push_borderlands } 
		provinces_to_highlight = {
			region = north_german_region
			NOT = { country_or_non_sovereign_subject_holds = ROOT } 
		}

		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 45
				region = north_german_region
			}
			north_rhine_area = { country_or_non_sovereign_subject_holds = ROOT } 
		}

		effect = {
			hidden_effect = {
				random_owned_province = {
					limit = { region = north_german_region } 
					change_culture = irminovci
					change_religion = slavic_religion
				}
				random_owned_province = {
					limit = { region = north_german_region } 
					change_culture = irminovci
					change_religion = slavic_religion
				}
				random_owned_province = {
					limit = { region = north_german_region } 
					change_culture = irminovci
					change_religion = slavic_religion
				}
				random_owned_province = {
					limit = { region = north_german_region } 
					change_culture = irminovci
					change_religion = slavic_religion
				}
				random_owned_province = {
					limit = { region = north_german_region } 
					change_culture = irminovci
					change_religion = slavic_religion
				}
			}
			custom_tooltip = ksb_5_provinces_irminovci_convert_tt
			add_country_modifier = {
				name = "ksb_spreading_slavic_culture"
				duration = 10950
			}
		}
	}

	sev_lords_of_germania = {
		icon = interfere_in_germany
		position = 7
		required_missions = {
			sev_convert_germania
			sev_to_the_rhine
			sev_lombardy_falls
		}
		provinces_to_highlight = {
			AND = {
				OR = {
					region = south_german_region
					region = north_german_region
				}
				NOT = { country_or_non_sovereign_subject_holds = ROOT } 
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT } 
		}

		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 15
				culture_group = pagan_slavic
				religion = slavic_religion
				OR = {
					region = north_german_region
					region = south_german_region
				}
			}
		}

		effect = {
			custom_tooltip = ksb_irminovci_converting_tt
			set_country_flag = ksb_irminovci_converting_flag
			add_country_modifier = {
				name = "ksb_lord_of_germania"
				duration = -1
			}
		}
	}
}
sevksb_3_branch = {
	slot = 3
	generic = no
	ai = yes
	has_country_shield = yes
	potential = {
		OR = {
			AND = {
				was_tag = KSB
				tag = SEV
			}
			AND = {
				was_tag = KSB
				tag = SLV
			}
		}
	}

	sev_conquer_south = {
		icon = alpine_fortifications
		position = 5
		required_missions = { ksb_lands_of_czech } 
		provinces_to_highlight = {
			OR = {
				area = upper_bavaria_area
				area = lower_bavaria_area
				area = east_bavaria_area
				area = upper_franconia_area
				area = franconia_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT } 
		}

		trigger = {
			upper_bavaria_area = {
				country_or_non_sovereign_subject_holds = ROOT
				type = all
			}
			lower_bavaria_area = {
				country_or_non_sovereign_subject_holds = ROOT
				type = all
			}
			east_bavaria_area = {
				country_or_non_sovereign_subject_holds = ROOT
				type = all
			}
			upper_franconia_area = {
				country_or_non_sovereign_subject_holds = ROOT
				type = all
			}
			franconia_area = {
				country_or_non_sovereign_subject_holds = ROOT
				type = all
			}
		}

		effect = {
			south_german_region = { add_permanent_claim = ROOT } 
			add_country_modifier = {
				name = "ksb_break_the_lombards"
				duration = 10950
			}
		}
	}

	sev_lombardy_falls = {
		icon = polish_diplomacy
		position = 6
		required_missions = { sev_conquer_south } 
		provinces_to_highlight = {
			region = south_german_region
			NOT = { country_or_non_sovereign_subject_holds = ROOT } 
		}

		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 30
				region = south_german_region
			}
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 5
				province_has_current_tech_fort_trigger = yes
				region = south_german_region
			}
		}

		effect = {
			every_owned_province = {
				limit = {
					region = south_german_region
					province_has_current_tech_fort_trigger = yes
				}
				add_province_modifier = {
					name = "ksb_mountain_bastions"
					duration = -1
				}
			}
		}
	}

	sev_mountain_crossing = {
		icon = alpine_defenses
		position = 7
		required_missions = { sev_volhynian_conquest } 
		provinces_to_highlight = {
			area = transylvania_area
			NOT = { country_or_non_sovereign_subject_holds = ROOT } 
		}

		trigger = {
			transylvania_area = {
				country_or_non_sovereign_subject_holds = ROOT
				type = all
			}
		}

		effect = {
			add_country_modifier = {
				name = "ksb_drakovan_defensiveness"
				duration = -1
			}
		}
	}

	sev_lord_of_slavia = {
		icon = mission_placeholder
		position = 8
		required_missions = {
			sev_mountain_crossing
			sev_between_seas
		}
		provinces_to_highlight = {
			culture_group = pagan_slavic
			NOT = { country_or_non_sovereign_subject_holds = ROOT } 
		}

		trigger = {
			all_province = {
				culture_group = pagan_slavic
				country_or_non_sovereign_subject_holds = ROOT
			}
		}

		effect = {
			add_country_modifier = {
				name = "ksb_lord_of_all_slavs"
				duration = -1
			}
			crimea_region = { add_permanent_claim = ROOT } 
			carpathia_region = { add_permanent_claim = ROOT } 
			280 = { add_core = ROOT } 
			if = {
				limit = { NOT = { mission_completed = sev_wild_frontier }  } 
				ruthenia_region = { add_permanent_claim = ROOT } 
			}
		}
	}
}
sevksb_4_branch = {
	slot = 4
	generic = no
	ai = yes
	has_country_shield = yes
	potential = {
		OR = {
			AND = {
				was_tag = KSB
				tag = SEV
			}
			AND = {
				was_tag = KSB
				tag = SLV
			}
		}
	}

	sev_volhynian_conquest = {
		icon = mission_advance_to_the_dnieper
		position = 6
		required_missions = { ksb_united_severoslavia } 
		provinces_to_highlight = {
			OR = {
				area = red_ruthenia_area
				area = volhynia_area
				province_id = 281
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT } 
		}

		trigger = {
			red_ruthenia_area = {
				country_or_non_sovereign_subject_holds = root
				type = all
			}
			volhynia_area = {
				country_or_non_sovereign_subject_holds = root
				type = all
			}
			owns_or_non_sovereign_subject_of = 281
		}

		effect = {
			add_country_modifier = {
				name = "ksb_great_march_south"
				duration = 7300
			}
			custom_tooltip = ksb_claim_all_slavic_provinces
			hidden_effect = {
				every_province = {
					limit = { culture_group = pagan_slavic } 
					add_permanent_claim = ROOT
				}
			}
			country_event = { id = pf_ksb_events.19 } 
		}
	}

	sev_between_seas = {
		icon = mission_establish_high_seas_navy
		position = 7
		required_missions = { sev_volhynian_conquest } 
		provinces_to_highlight = {
			area = moldavia_area
			NOT = { country_or_non_sovereign_subject_holds = ROOT } 
		}

		trigger = {
			moldavia_area = {
				country_or_non_sovereign_subject_holds = ROOT
				type = all
			}
		}

		effect = {
			1756 = {
				add_province_modifier = {
					name = "ksb_mouth_of_the_danube"
					duration = -1
				}
			}
		}
	}
}
sevksb_5_branch = {
	slot = 5
	generic = no
	ai = yes
	has_country_shield = yes
	potential = {
		OR = {
			AND = {
				was_tag = KSB
				tag = SEV
			}
			AND = {
				was_tag = KSB
				tag = SLV
			}
		}
	}

	sev_wild_frontier = {
		icon = mission_the_caucasus_rus
		position = 7
		required_missions = { ksb_end_zilant_raids } 
		provinces_to_highlight = {
			OR = {
				area = smolensk_area
				area = pskov_area
				area = white_ruthenia_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT } 
		}

		trigger = {
			smolensk_area = {
				country_or_non_sovereign_subject_holds = ROOT
				type = all
			}
			pskov_area = {
				country_or_non_sovereign_subject_holds = ROOT
				type = all
			}
			white_ruthenia_area = {
				country_or_non_sovereign_subject_holds = ROOT
				type = all
			}
		}

		effect = {
			russia_region = { add_permanent_claim = ROOT } 
			ruthenia_region = { add_permanent_claim = ROOT } 
		}
	}

	sev_rusnok_lands = {
		icon = mission_marwari_horses
		position = 9
		required_missions = {
			sev_lord_of_slavia
			sev_wild_frontier
		}
		provinces_to_highlight = {
			region = russia_region
			NOT = { country_or_non_sovereign_subject_holds = ROOT } 
		}

		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 50
				region = russia_region
			}
		}

		effect = {
			ural_region = { add_permanent_claim = ROOT } 
			add_country_modifier = {
				name = "ksb_convert_mongols"
				duration = 10950
			}
		}
	}

	sev_krakow = {
		icon = mission_pol_revival_krakow
		position = 10
		provinces_to_highlight = {  
			province_id = 262
		} 

		trigger = {  
			262 = {
				has_production_building_trigger = yes
				has_tax_building_trigger = yes
				has_manpower_building_trigger = yes
				development = 30
			}
			trade_company_krakow = {
				is_strongest_trade_power = ROOT
			}
		} 

		effect = {  
			add_years_of_trade_income = {
				years = 2
			}
			262 = {
				upgrade_center_of_trade = yes

			}
		} 
	}

	sev_endless_fields = {
		icon = mission_pol_tend_east
		position = 11
		required_missions = { sev_krakow } 
		provinces_to_highlight = {  
			NOT = {
				AND = {
					base_production = 8
					OR = {
						trade_goods = grain
						trade_goods = livestock
					}
				}
			}
			owned_by = ROOT
		} 

		trigger = {  
			num_of_owned_provinces_with = {
				value = 20
				base_production = 8
				OR = {
					trade_goods = grain
					trade_goods = livestock
				}
			}
		} 

		effect = {  
			change_price = {
				trade_goods = grain
				key = "Slavic Grain"
				value = 0.2
				duration = 7300
			}
			change_price = {
				trade_goods = livestock
				key = "Slavic Livestock"
				value = 0.2
				duration = 7300
			}
		} 
	}
}
slvksb_1_branch = {
	slot = 1
	generic = no
	ai = yes
	has_country_shield = yes
	potential = {
		AND = {
			was_tag = KSB
			tag = SLV
		}
	}

	slv_2_seas_2_fleets = {
		icon = crusader_fleet
		position = 12
		required_missions = { sev_baltic_monopolies } 
		provinces_to_highlight = {  
			if = {
				limit = {
					1756 = {
						NOT = {
							has_dock_building_trigger = yes
						}
					}
				}
				province_id = 1756
			}
		} 

		trigger = {  
			navy_size_percentage = 1
			num_of_admirals = 3
			1756 = {
				has_dock_building_trigger = yes
			}
		} 

		effect = {  
			add_navy_tradition = 30
			define_advisor = {
				type = naval_reformer
				skill = 3
				cost_multiplier = -0.75
			}
		} 
	}
}
slvksb_2_branch = {
	slot = 2
	generic = no
	ai = yes
	has_country_shield = yes
	potential = {
		AND = {
			was_tag = KSB
			tag = SLV
		}
	}

	slv_ostgermanic_invasion = {
		icon = invade_poland
		position = 9
		required_missions = {
			sev_lords_of_germania
			sev_lord_of_slavia
		}
		provinces_to_highlight = {
			region = carpathia_region
			NOT = { country_or_non_sovereign_subject_holds = ROOT } 
		}

		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 40
				region = carpathia_region
			}
		}

		effect = { illyria_region = { add_permanent_claim = ROOT }  } 
	}

	slv_illyrian_conquest = {
		icon = mission_balkan_conquest
		position = 10
		required_missions = { slv_ostgermanic_invasion } 
		provinces_to_highlight = {
			region = illyria_region
			NOT = { country_or_non_sovereign_subject_holds = ROOT } 
		}

		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 30
				region = illyria_region
			}
		}

		effect = { balkan_region = { add_permanent_claim = ROOT }  } 
	}

	slv_alexanders_lands = {
		icon = pf_hellenic_temple_burning
		position = 11
		required_missions = { slv_illyrian_conquest } 
		provinces_to_highlight = {
			region = balkan_region
			NOT = { country_or_non_sovereign_subject_holds = ROOT } 
		}

		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 40
				region = balkan_region
			}
			owns = 148
			owns = 146
		}

		effect = {
			country_event = { id = pf_ksb_events.20 } 
			add_prestige_or_monarch_power = { amount = 25 } 
			146 = {
				add_devastation = 60
				destroy_great_project = { type = seat_of_the_archon } 
				custom_tooltip = emp
				add_great_project_tier = {
					type = parthenon
					tier = -4
				}
			}
		}
	}

	slv_crimean_ports = {
		icon = mission_portuguese_malacca
		position = 13
		required_missions = { slv_2_seas_2_fleets } 
		provinces_to_highlight = {  
			area = crimea_area
			NOT = {
				AND = {
					has_shipyard_building_trigger = yes
					has_dock_building_trigger = yes
				}
			}
		} 

		trigger = {  
			crimea_area = {
				type = all
				AND = {
					has_shipyard_building_trigger = yes
					has_dock_building_trigger = yes
				}
			}
		} 

		effect = {  
			crimea_area = {
				change_culture = ROOT
				change_religion = ROOT
				add_province_modifier = {
					name = ksb_crimean_tradeport
					duration = -1
				}
			}
		} 
	}
}
slvksb_3_branch = {
	slot = 3
	generic = no
	ai = yes
	has_country_shield = yes
	potential = {
		AND = {
			was_tag = KSB
			tag = SLV
		}
	}

	slv_pontus_conquest = {
		icon = the_russian_campaign
		position = 9
		required_missions = { sev_lord_of_slavia } 
		provinces_to_highlight = {
			region = crimea_region
			NOT = { country_or_non_sovereign_subject_holds = ROOT } 
		}

		trigger = {
			crimea_region = {
				country_or_non_sovereign_subject_holds = ROOT
				type = all
			}
		}

		effect = {
			circassia_area = { add_permanent_claim = ROOT } 
			dagestan_area = { add_permanent_claim = ROOT } 
			add_country_modifier = {
				name = "ksb_crimean_horsemen"
				duration = -1
			}
		}
	}

	slv_restore_rus = {
		icon = mission_restore_kiev
		position = 10
		required_missions = {
			slv_pontus_conquest
			slv_kiev_recovered
			sev_rusnok_lands
		}
		provinces_to_highlight = {
			AND = {
				OR = {
					region = ruthenia_region
					region = russia_region
				}
				NOT = { culture_group = ROOT } 
			}
			country_or_non_sovereign_subject_holds = ROOT
		}

		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 6
				culture = rus_new
				OR = {
					region = ruthenia_region
					region = russia_region
				}
			}
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 30
				religion = ROOT
				OR = {
					region = ruthenia_region
					region = russia_region
				}
			}
			280 = {
				province_has_current_tech_fort_trigger = yes
				has_trade_building_trigger = yes
				has_tax_building_trigger = yes
				has_production_building_trigger = yes
				has_manufactory_trigger = yes
			}
		}

		effect = {
			custom_tooltip = ksb_rus_culture_converting_tt
			set_country_flag = ksb_converting_rus_flag
		}
	}

	slv_3rd_empire = {
		icon = mission_placeholder
		position = 12
		required_missions = {
			slv_alexanders_lands
			slv_siberian_frontiers
			slv_restore_rus
		}
		provinces_to_highlight = {  } 

		trigger = {
			is_hegemon = yes
			prestige = 90
		}

		effect = {
			custom_tooltip = pol_if_used_ge_rest_else_30_years_extension_tt
			if = {
				limit = { has_had_golden_age = yes } 
				reset_golden_age = yes
			}
			else_if = {
				limit = { in_golden_age = yes } 
				extend_golden_age = 360
			}
		}
	}

	slv_prosperous_land = {
		icon = prosperity_for_all
		position = 14
		required_missions = {
			slv_crimean_ports
			slv_urbanization
		}
		provinces_to_highlight = {  } 

		trigger = {  
			development_in_provinces = {
				value = 1000
				culture_group = ROOT
			}
		} 

		effect = {  
			custom_tooltip = "ksb_100_prosperity"
			hidden_effect = {
				every_owned_province = {
					limit = {
						culture_group = ROOT
					}
					add_prosperity = 100
				}
			}
		} 
	}
}
slvksb_4_branch = {
	slot = 4
	generic = no
	ai = yes
	has_country_shield = yes
	potential = {
		AND = {
			was_tag = KSB
			tag = SLV
		}
	}

	slv_kiev_recovered = {
		icon = mission_develop_kiev
		position = 9
		required_missions = { sev_lord_of_slavia } 
		provinces_to_highlight = {
			region = ruthenia_region
			NOT = { country_or_non_sovereign_subject_holds = ROOT } 
		}

		trigger = {
			ruthenia_region = {
				country_or_non_sovereign_subject_holds = ROOT
				type = all
			}
			280 = {
				is_core = ROOT
				development = 20
				religion = slavic_religion
			}
		}

		effect = {
			280 = {
				change_culture = rus_new
				add_province_modifier = {
					name = "ksb_rus_capital"
					duration = -1
				}
			}
			country_event = { id = pf_ksb_events.21 } 
		}
	}

	slv_uralic_push = {
		icon = mission_beyond_the_urals
		position = 10
		required_missions = {
			sev_rusnok_lands
		}
		provinces_to_highlight = {
			AND = {
				region = ural_region
				is_city = yes
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT } 
		}

		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 25
				is_city = yes
				region = ural_region
			}
		}

		effect = {
			discover_province = 1780
			1780 = {
				create_colony_mission_reward_province = yes
				add_colonysize = 100
			}
		}
	}

	slv_siberian_frontiers = {
		icon = mission_recruit_the_cossacks
		position = 11
		required_missions = { slv_uralic_push } 
		provinces_to_highlight = {  } 

		trigger = { owns = 1780 } 

		effect = {
			add_country_modifier = {
				name = "ksb_siberian_frontier"
				duration = 36500
			}
		}
	}

	slv_urbanization = {
		icon = promote_urbanization
		position = 13
		required_missions = { slv_silesian_mining } 
		provinces_to_highlight = {  
			NOT = {
				AND = {
					has_tax_building_trigger = yes
					has_production_building_trigger = yes
					has_manpower_building_trigger = yes
					development = 20
					culture_group = ROOT
				}
			}
			owned_by = ROOT
		} 

		trigger = {  
			num_of_owned_provinces_with = {
				value = 10
				has_tax_building_trigger = yes
				has_production_building_trigger = yes
				has_manpower_building_trigger = yes
				development = 20
				culture_group = ROOT
			}
		} 

		effect = {  
			add_ruler_personality = great_engineer_personality
			add_country_modifier = {
				name = ksb_flocking_to_cities
				duration = 10950
			}
		} 
	}
}
slvksb_5_branch = {
	slot = 5
	generic = no
	ai = yes
	has_country_shield = yes
	potential = {
		AND = {
			was_tag = KSB
			tag = SLV
		}
	}

	slv_silesian_mining = {
		icon = mission_jawal_silver_mine
		position = 12
		required_missions = { sev_endless_fields } 
		provinces_to_highlight = {  
			province_id = 263
			province_id = 2966
		} 

		trigger = {  
			2966 = {
				has_manufactory_trigger = yes
				development = 20
			}
			263 = {
				has_manufactory_trigger = yes
				development = 20
			}
		} 

		effect = {  
			2966 = {
				add_province_modifier = {
					name = ksb_military_industrial_complex
					duration = -1
				}
			}
			263 = {
				change_trade_goods = coal
				add_province_triggered_modifier = pf_ksb_early_coal
			}
		} 
	}

	slv_early_manufacturing = {
		icon = saxon_manufacturing
		position = 14
		required_missions = { slv_urbanization } 
		provinces_to_highlight = {  
			owned_by = ROOT
			culture_group = ROOT
			NOT = {
				AND = {
					has_manufactory_trigger = yes
					development = 20
				}
			}
		} 

		trigger = {  
			num_of_owned_provinces_with = {
				value = 20
				has_manufactory_trigger = yes
				development = 20
				culture_group = ROOT
			}
		} 

		effect = {  
			add_years_of_income = 2
			add_country_modifier = {
				name = ksb_modern_state
				duration = -1
			}
		} 
	}
}

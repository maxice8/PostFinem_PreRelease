carthage_1 = {
	slot = 1
	generic = no
	ai = yes
	has_country_shield = yes
	potential = {
		tag = CAR
	}
	car_revive_lilybaeum = {
		icon = mission_found_havana
		required_missions = { car_prepare_invasion }
		position = 2
		provinces_to_highlight = {
			area = western_sicily_area
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		trigger = { 
			western_sicily_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT	
			}
		}
		effect = {
			western_sicily_area = {
				add_permanent_province_modifier = {
					name = car_revive_lily_modifier
					duration = 7300
				}
			}
			sicily_area = { add_permanent_claim = ROOT }
			corsica_sardinia_area = { add_permanent_claim = ROOT }
		}
	}
	car_conquer_isles = {
		icon = mission_portuguese_malacca
		required_missions = { car_revive_lilybaeum }
		position = 3
		provinces_to_highlight = {
			OR = {
				area = corsica_sardinia_area
				area = sicily_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		trigger = { 			
			corsica_sardinia_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT	
			}
			sicily_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT	
			}
		}
		effect = {
			add_mercantilism = 5
			custom_tooltip = " "
			sicily_area = {
				add_nationalism = -10
				add_permanent_province_modifier = {
					name = car_conquer_isles_modifier
					duration = 18250
				}
			}
			corsica_sardinia_area = {
				add_nationalism = -10
				add_permanent_province_modifier = {
					name = car_conquer_isles_modifier
					duration = 18250
				}
			}
			liguria_area = { add_permanent_claim = ROOT }
			naples_area = { add_permanent_claim = ROOT }
			apulia_area = { add_permanent_claim = ROOT }
			calabria_area = { add_permanent_claim = ROOT }
		}
	}
	car_push_rome = {
		icon = new_st_peters_basilica
		required_missions = { car_conquer_isles }
		position = 4
		provinces_to_highlight = {
			region = italy_region
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		trigger = { 
			num_of_owned_provinces_with = { 
				value = 18
				region = italy_region
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			add_country_modifier = {
				name = car_push_rome_modifier
				duration = 5475
			}
			tuscany_area = { add_permanent_claim = ROOT }
			lazio_area = { add_permanent_claim = ROOT }
		}
	}
}

carthage_2 = {
	slot = 2
	generic = no
	ai = yes
	has_country_shield = yes
	potential = {
		tag = CAR
	}
	car_prepare_invasion = {
		icon = mission_colonize_the_west
		required_missions = {  }
		position = 1
		provinces_to_highlight = {  }
		trigger = { 
			num_of_galley = 7
			num_of_transport = 5
			if = {
				limit = { ai = no }				
				army_size_percentage = 1
			}
			else = { army_size_percentage = 0.5 }
		}
		effect = {
			add_country_modifier = {
				name = car_prepare_invasion_modifier
				duration = 3650
			}
			kabylia_area = { add_permanent_claim = ROOT }
			barbary_coast_area = { add_permanent_claim = ROOT }
			western_sicily_area = { add_permanent_claim = ROOT }
		}
	}
	car_dominate_north_africa = {
		icon = mission_turning_the_tables
		required_missions = { car_prepare_invasion }
		position = 2
		provinces_to_highlight = {
			OR = {
				area = kabylia_area
				area = barbary_coast_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		trigger = { 					
			kabylia_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT	
			}					
			barbary_coast_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT	
			}					
		}
		effect = {
			add_prestige = 20
			add_mil_power = 50
			custom_tooltip = " "
			add_country_modifier = {
				name =  car_dominate_north_africa_modifier
				duration = 7300
			}
			algiers_area = { add_permanent_claim = ROOT }
			northern_morocco_area = { add_permanent_claim = ROOT }
			western_morocco_area = { add_permanent_claim = ROOT }
			marrekesh_area = { add_permanent_claim = ROOT }
		}
	}
	car_masters_maghreb = {
		icon = mission_conquer_algiers
		required_missions = { car_dominate_north_africa }
		position = 3
		provinces_to_highlight = {
			AND = {
				OR = {
					area = algiers_area
					area = northern_morocco_area
					area = western_morocco_area
					area = marrekesh_area
				}
				NOT = { country_or_non_sovereign_subject_holds = ROOT }
			}
			owner = {
				capital_scope = { 
					region = maghreb_region
				}
				NOT = { is_subject_of = ROOT }
				total_development = 50
			}
		}
		trigger = { 							
			algiers_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT	
			}								
			northern_morocco_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT	
			}								
			western_morocco_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT	
			}								
			marrekesh_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT	
			}	
			NOT = {
				any_country = {
					capital_scope = { region = maghreb_region }
					NOT = { is_subject_of = ROOT }
					total_development = 50
				}
			}
		}	
		effect = {
			add_stability_or_adm_power = yes
			custom_tooltip = car_masters_maghreb_tt
			hidden_effect = {
				every_country = {
					limit = {
						capital_scope = { region = maghreb_region }
						NOT = { total_development = 50 }
						NOT = { is_subject_of = ROOT }
					}
					reverse_add_casus_belli = {
						target = ROOT
						type = cb_vassalize_mission 
						months = 120
					}
				}
			}
			custom_tooltip = " "
			lower_andalucia_area = { add_permanent_claim = ROOT }
			upper_andalucia_area = { add_permanent_claim = ROOT }
		}
	}
	car_avenge_punic_wars = {
		icon = a_place_among_the_great_powers
		required_missions = { car_push_rome car_estabish_carthago_nova }
		position = 5
		provinces_to_highlight = { 
			province_id = 118
			NOT = { owned_by = ROOT }
		}
		trigger = { 
			118 = {
				owned_by = ROOT
				is_core = ROOT
				controlled_by = ROOT
			}
			NOT = { great_power_rank = 4 }
			army_size = 100
		}
		effect = {
			add_army_tradition = 25
			custom_tooltip = " "
			add_country_modifier = {
				name = car_avenge_punic_wars_modifier
				duration = -1
			}
			italy_region = { add_permanent_claim = ROOT }
		}
	}
}

carthage_3 = {
	slot = 3
	generic = no
	ai = yes
	has_country_shield = yes
	potential = {
		tag = CAR
	}
	car_worthy_navy = {
		icon = overshadow_venice
		required_missions = { car_establish_power_base }
		position = 2
		provinces_to_highlight = { }
		trigger = { 
			naval_forcelimit = 30
			num_of_galley = 20
		}
		effect = {
			add_country_modifier = {
				name = car_worthy_navy_modifier
				duration = 7300
			}
		}
	}
	car_estabish_carthago_nova = {
		icon = mission_reclaim_andalucia
		required_missions = { car_masters_maghreb }
		position = 4
		provinces_to_highlight = {
			province_id = 221
			NOT = { owned_by = ROOT }
		}
		trigger = { 	
			221 = { 
				owned_by = ROOT
				is_core = ROOT
				controlled_by = ROOT
			}
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = { 
				value = 10
				region = iberia_region
			}
		}
		effect = {
			221 = {
				change_province_name = "Carthago Nova"
				hidden_effect = { rename_capital = "Carthago Nova" }
				add_base_tax = 2
				add_base_production = 2
				add_base_manpower = 3
				custom_tooltip = " "
				change_trade_goods = paper
				add_permanent_province_modifier = {
					name = car_estabish_carthago_nova_modifier
					duration = -1
				}
			}
			iberia_region = { add_permanent_claim = ROOT }
		}
	}
	car_next_chapter = {
		icon = centralize_france
		required_missions = { car_estabish_carthago_nova car_avenge_punic_wars }
		position = 6
		provinces_to_highlight = {
			region = iberia_region
			NOT = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		trigger = { 	
			iberia_region = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			add_stability_or_adm_power = yes
			add_country_modifier = {
				name = car_next_chapter_modifier
				duration = 7300
			}
			custom_tooltip = car_next_chapter_tt		
			hidden_effect = { 
				every_owned_province = {
					limit = { region = iberia_region }
					add_permanent_province_modifier = {
						name = car_next_chapter_province_modifier
						duration = 3650
					}
				}
			}
			custom_tooltip = " "
			france_region = { add_permanent_claim = ROOT }
		}
	}
}

carthage_4 = {
	slot = 4
	generic = no
	has_country_shield = yes
	ai = yes
	potential = {
		tag = CAR
	}
	car_establish_power_base = {
		icon = africa_proconsulare
		required_missions = {  }
		position = 1
		provinces_to_highlight = { }
		trigger = { 
			num_of_cities = 20
			OR = {
				num_of_allies = 1
				num_of_subjects = 2
			}
			owns_core_province = 341
			controls = 341
			341 = {
				NOT = { has_construction = missionary }
				NOT = { has_construction = culture }
				NOT = { has_construction = core }
				NOT = { has_construction = building }
			}
		}
		effect = {
			add_country_modifier = {
				name = car_establish_power_base_modifier
				duration = 7300
			}
			country_event = { id = ar_car_events.1 }
		}
	}
	car_carthage_reborn = {
		icon = mission_empire
		required_missions = { car_establish_power_base }
		position = 3
		provinces_to_highlight = {
			owner = { 
				is_great_power = yes
			}
			is_capital = yes
		}
		trigger = { 
			grown_by_development = 100
			any_other_great_power = {
				ROOT = {
					has_won_war_against = {
						who = PREV
						max_years_since = 5
					}
				}
			}
		}
		effect = {
			add_country_modifier = {
				name = car_carthage_reborn_modifier
				duration = 18250
			}
			create_general = { tradition = 100 }
		}
	}
	car_productive_provinces = {
		icon = mission_rb_build_furnaces
		required_missions = { car_carthage_reborn }
		position = 4
		provinces_to_highlight = { }
		trigger = { 
			num_of_owned_provinces_with = {
				value = 10
				has_manufactory_trigger = yes 
			}
		}
		effect = {
			custom_tooltip = car_productive_provinces_bizerte_tt
			custom_tooltip = " "
			hidden_effect = {
				if = {
					limit = {
						2455 = { has_manufactory_trigger = yes }
					}
					2455 = {
						remove_building = farm_estate
						change_trade_goods = paper
						add_permanent_province_modifier = {
							name = car_productive_provinces_bizerte_modifier
							duration = -1
						}
						add_building = mills
					}
				}
			}
			add_country_modifier = {
				name = car_productive_provinces_modifier
				duration = 7300
			}
		}
	}
}


carthage_5 = {
	slot = 5
	generic = no
	has_country_shield = yes
	ai = yes
	potential = {
		tag = CAR
	}
	car_developing_nation = {
		icon = develop_the_po_valley
		required_missions = { car_establish_power_base }
		position = 2
		provinces_to_highlight = { }
		trigger = { 
			num_of_owned_provinces_with = {
				value = 6
				development = 20
			}
		}
		effect = {
			define_advisor = {
				type = natural_scientist
				skill = 2
				cost_multiplier = 0.25
			}
			custom_tooltip = " "
			add_years_of_owned_provinces_production_income = {
				years = 5
				custom_tooltip = "based on production in the country."
			}
		}
	}
	car_cross_the_alps = {
		icon = alpine_defenses
		required_missions = { car_carthage_reborn }
		position = 4
		provinces_to_highlight = { 
			OR = {
				area = po_valley_area
				area = lombardy_area
				area = piedmont_area
			}
			NOT = { owned_by = ROOT }
		}
		trigger = { 
			num_of_cavalry = 20
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 6
				OR = {
					area = po_valley_area
					area = lombardy_area
					area = piedmont_area
				}
			}
		}
		effect = {
			random_owned_province = {
				limit = {
					area = po_valley_area
					area = lombardy_area
					area = piedmont_area
				}	
				cossack_cavalry = ROOT 
				cossack_cavalry = ROOT 
				cossack_cavalry = ROOT 
				cossack_cavalry = ROOT 
			}
			custom_tooltip = " "
			add_country_modifier = {
				name = car_cross_the_alps_modifier
				duration = -1
			}
		}
	}
	car_phoenician_trade = {
		icon = mission_early_game_buildings
		required_missions = { car_productive_provinces }
		position = 5
		provinces_to_highlight = {
			province_id = 1298
			OR = {
				NOT = { trade_node_value = 50 }
				NOT = { is_strongest_trade_power = ROOT }
			}
		}
		trigger = { 
			1298 = {
				trade_node_value = 50
			}
			1298 = {
				is_strongest_trade_power = ROOT
			}
		}
		effect = {
			add_dip_power = 100
			define_advisor = {
				type = trader
				skill = 3
				cost_multiplier = 0.25
			}
			custom_tooltip = " "
			capital_scope = {
				if = {
					limit = { has_port = yes }
					add_unit_construction = {
						type = light_ship
						amount = 10
						speed = 0.1
						cost = 0
					}
				}
				else = {
					owner = { add_years_of_income = 2 }
				}
			}
		}
	}
	car_hegemon_of_the_seas = {
		icon = mission_sponsor_piracy
		required_missions = { car_phoenician_trade }
		position = 6
		provinces_to_highlight = {
			province_id = 1298
			OR = {
				NOT = { highest_value_trade_node = yes }
				NOT = {
					trade_share = {
						country = ROOT
						share = 90
					}
				}
			}
		}
		trigger = { 
			1298 = {
				highest_value_trade_node = yes
			}
			1298 = {
				trade_share = {
					country = ROOT
					share = 90
				}
			}
		}
		effect = {
			341 = {
				add_base_tax = 1
				add_base_production = 2
				add_base_manpower = 1
				custom_tooltip = " "
				add_permanent_province_modifier = {
					name = car_hegemon_of_the_seas_modifier
					duration = -1
				}
			}
		}
	}
}
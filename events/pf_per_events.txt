namespace = pf_per_events

# Crisis in Persia, triggered on start
country_event = {
	id = pf_per_events.0
	title = "pf_per_events_0_title"
	desc = "pf_per_events_0_desc"
	picture = OVEREXTENSION_eventPicture
	is_triggered_only = yes
	fire_only_once = yes

	immediate = {
		hidden_effect = {
			set_variable = {
				which = pfPerSatrapyDemandsFilled
				value = 0
			}
		}
	}
	
	trigger = {
		tag = PER
	}

	option = {
		name = "pf_per_events_0_option"
		ai_chance = { factor = 100 }
		custom_tooltip = pf_per_events_0_tt
	}
}

# Start of Satrapy Revolt Disaster
country_event = {
	id = pf_per_events.1
	title = "pf_per_events_1_title"
	desc = "pf_per_events_1_desc"
	picture = CIVIL_WAR_eventPicture
	is_triggered_only = yes
	fire_only_once = yes

	immediate = {
		hidden_effect = {
			every_subject_country = {
				capital_scope = { independence_rebels = 3 }
			}
		}
	}

	option = {
		name = "pf_per_events_1_option"
		ai_chance = { factor = 100 }
		add_stability = -2
		add_prestige = -20
		custom_tooltip = pf_per_events_1_tt
	}
}

# Satrapy Revolt Disaster: Satrapy Disobeys
country_event = {
	id = pf_per_events.2
	title = "pf_per_events_2_title"
	desc = "pf_per_events_2_desc"
	picture = NOBLE_ESTATE_DEMANDS_eventPicture
	is_triggered_only = yes
	
	immediate = {
		random_subject_country = {
			limit = { liberty_desire = 50 }
			save_event_target_as = disobedient_satrap
		}
	}

	option = {
		name = "pf_per_events_2_option"
		ai_chance = { factor = 100 }
		add_prestige = -10
	}
}

# Satrapy Revolt Disaster: Satrapy demands money
country_event = {
	id = pf_per_events.3
	title = "pf_per_events_3_title"
	desc = "pf_per_events_3_desc"
	picture = NOBLE_ESTATE_DEMANDS_eventPicture
	is_triggered_only = yes

	trigger = {
		any_subject_country = {
			liberty_desire = 50
			NOT = { has_country_modifier = pf_per_satrapy_compromised }
		}
	}
	
	immediate = {
		random_subject_country = {
			limit = {
				liberty_desire = 50
				NOT = { has_country_modifier = pf_per_satrapy_compromised }
			}
			save_event_target_as = disobedient_satrap
		}
	}

	option = {
		name = "pf_per_events_3_option_1"
		ai_chance = { factor = 100 }

		if = {
			limit = { event_target:disobedient_satrap = { liberty_desire = 100 } }
			add_years_of_income = -1.2
		}
		else_if = {
			limit = { event_target:disobedient_satrap = { liberty_desire = 75 } }
			add_years_of_income = -0.9
		}
		else = {
			add_years_of_income = -0.6
		}
			
		event_target:disobedient_satrap = {
			add_country_modifier = {
				name = pf_per_satrapy_compromised
				duration = -1
				desc = "pf_per_satrapy_revolt_until_end_tt"
			}
			if = {
				limit = { has_country_modifier = pf_per_satrapy_refused }
				remove_country_modifier = pf_per_satrapy_refused
			}
		}
	}

	option = {
		name = "pf_per_events_3_option_2"
		ai_chance = { factor = 0 }
		event_target:disobedient_satrap = {
			add_country_modifier = {
				name = pf_per_satrapy_refused
				duration = -1
				desc = "pf_per_satrapy_revolt_until_end_tt"
			}
		}
	}
}

# Satrapy Revolt Disaster: Satrapy demands privileges
country_event = {
	id = pf_per_events.4
	title = "pf_per_events_4_title"
	desc = "pf_per_events_4_desc"
	picture = NOBLE_ESTATE_DEMANDS_eventPicture
	is_triggered_only = yes

	trigger = {
		any_subject_country = {
			liberty_desire = 50
			NOT = { has_country_modifier = pf_per_satrapy_compromised }
		}
	}
	
	immediate = {
		random_subject_country = {
			limit = {
				liberty_desire = 50
				NOT = { has_country_modifier = pf_per_satrapy_compromised }
			}
			save_event_target_as = disobedient_satrap
		}
	}

	option = {
		name = "pf_per_events_4_option_1"
		ai_chance = { factor = 100 }
		add_government_power = {
			mechanic_type = pf_per_centralization_mechanic
			power_type = pf_per_centralization
			value = -5
		}
		event_target:disobedient_satrap = {
			add_country_modifier = {
				name = pf_per_satrapy_compromised
				duration = -1
				desc = "pf_per_satrapy_revolt_until_end_tt"
			}
			if = {
				limit = { has_country_modifier = pf_per_satrapy_refused }
				remove_country_modifier = pf_per_satrapy_refused
			}
		}
	}

	option = {
		name = "pf_per_events_4_option_2"
		ai_chance = { factor = 0 }
		event_target:disobedient_satrap = {
			add_country_modifier = {
				name = pf_per_satrapy_refused
				duration = -1
				desc = "pf_per_satrapy_revolt_until_end_tt"
			}
		}
	}
}

# Satrapy Revolt Disaster: Uprising in Satrapy
country_event = {
	id = pf_per_events.5
	title = "pf_per_events_5_title"
	desc = "pf_per_events_5_desc"
	picture = ANGRY_MOB_eventPicture
	is_triggered_only = yes
	
	immediate = {
		random_subject_country = {
			limit = { liberty_desire = 50 }
			save_event_target_as = disobedient_satrap
		}
	}

	option = {
		name = "pf_per_events_5_option"
		ai_chance = { factor = 100 }
		event_target:disobedient_satrap = {

			if = {
				limit = { liberty_desire = 100 }
				capital_scope = { independence_rebels = 4 }
				random_owned_province = { independence_rebels = 3 }
				random_owned_province = { independence_rebels = 3 }
			}
			else_if = {
				limit = { liberty_desire = 75 }
				capital_scope = { independence_rebels = 3 }
				random_owned_province = { independence_rebels = 2 }
				random_owned_province = { independence_rebels = 2 }
			}
			else = {
				capital_scope = { independence_rebels = 2 }
				random_owned_province = { independence_rebels = 1 }
				random_owned_province = { independence_rebels = 1 }
			}
		}
	}
}

# Satrapy Revolt Disaster: Satrapies Collaborate
country_event = {
	id = pf_per_events.6
	title = "pf_per_events_6_title"
	desc = "pf_per_events_6_desc"
	picture = DIPLOMACY_eventPicture
	is_triggered_only = yes
	
	trigger = {
		calc_true_if = {
			all_subject_country = { liberty_desire = 50 }
			amount = 2
		}
	}

	immediate = {
		random_subject_country = {
			limit = { liberty_desire = 50 }
			save_event_target_as = disobedient_satrap
		}
		random_subject_country = {
			limit = { 
				liberty_desire = 50
				NOT = { tag = event_target:disobedient_satrap }
			}
			save_event_target_as = disobedient_satrap2
		}
	}

	option = {
		name = "pf_per_events_6_option"
		ai_chance = { factor = 100 }
		event_target:disobedient_satrap = {
			add_country_modifier = {
				name = pf_per_satrapy_collaborated
				duration = -1
				desc = "pf_per_satrapy_revolt_until_end_tt"
			}
		}
		event_target:disobedient_satrap2 = {
			add_country_modifier = {
				name = pf_per_satrapy_collaborated
				duration = -1
				desc = "pf_per_satrapy_revolt_until_end_tt"
			}
		}
	}
}

# Satrapy Revolt Disaster: Satrapy Compromises
country_event = {
	id = pf_per_events.7
	title = "pf_per_events_7_title"
	desc = "pf_per_events_7_desc"
	picture = DIPLOMACY_eventPicture
	is_triggered_only = yes

	trigger = {
		any_subject_country = {
			NOT = { liberty_desire = 100 }
			
		}
	}

	immediate = {
		random_subject_country = {
			limit = { NOT = { liberty_desire = 100 } }
			save_event_target_as = disobedient_satrap # Actually not disobedient
		}
	}

	option = {
		name = "pf_per_events_7_option"
		ai_chance = { factor = 100 }
		event_target:disobedient_satrap = {
			add_country_modifier = {
				name = pf_per_satrapy_compromised
				duration = -1
				desc = "pf_per_satrapy_revolt_until_end_tt"
			}
		}
	}
}

# Satrapy Revolt Disaster: Satrapies become independant
country_event = {
	id = pf_per_events.8
	title = "pf_per_events_8_title"
	desc = "pf_per_events_8_desc"
	picture = COUNTRY_COLLAPSE_eventPicture
	mean_time_to_happen = { days = 1 }
	fire_only_once = yes
	
	trigger = {
		tag = PER
		is_year = 1450
		any_subject_country = {
			liberty_desire = 100
		}
		has_disaster = pf_per_satrapy_revolt
	}

	immediate = {
		hidden_effect = {
			every_subject_country = {
				limit = { liberty_desire = 100}
				grant_independence = yes
			}
		}
	}

	option = {
		name = "pf_per_events_8_option"
		ai_chance = { factor = 100 }
		custom_tooltip = pf_per_events_8_tt
		add_stability = -1
	}
}

# End of Satrapy Revolt
country_event = {
	id = pf_per_events.9
	title = "pf_per_events_9_title"
	desc = {
		trigger = { 
			all_subject_country = { NOT = { liberty_desire = 50 } }
		}
		desc = "pf_per_events_9_desc_1"
	}
	desc = {
		trigger = { 
			NOT = { has_government_power = {
				mechanic_type = pf_per_centralization_mechanic
				power_type = pf_per_centralization
				value = 20
			}}
		}
		desc = "pf_per_events_9_desc_2"
	}
	desc = {
		trigger = { NOT = { satrapy = 1 } }
		desc = "pf_per_events_9_desc_3"
	}
	


	picture = COURT_eventPicture
	is_triggered_only = yes
	fire_only_once = yes

	immediate = {
		set_country_flag = pf_per_had_satrapy_revolt
		hidden_effect = {
			complete_mission = pf_per_appeal_to_religion
			complete_mission = pf_per_raise_the_army
			complete_mission = pf_per_find_allies
			complete_mission = pf_per_show_our_strength
			complete_mission = pf_per_divide_and_conquer
		}
	}

	after = {
		AFG = { pf_per_clear_satrapy_revolt_modifiers = yes }
		KHU = { pf_per_clear_satrapy_revolt_modifiers = yes }
		TAB = { pf_per_clear_satrapy_revolt_modifiers = yes }
		KHO = { pf_per_clear_satrapy_revolt_modifiers = yes }
		BAL = { pf_per_clear_satrapy_revolt_modifiers = yes }
		every_subject_country = {
			pf_per_clear_satrapy_revolt_modifiers = yes
		}
		pf_per_clear_satrapy_revolt_modifiers_persia = yes
	}

	option = {
		name = "pf_per_events_9_option_1"
		trigger = { 
			all_subject_country = { NOT = { liberty_desire = 50 } }
		}
		add_stability = 2
		add_prestige = 50
		add_country_modifier = {
			name = pf_per_won_satrapy_revolt
			duration = 3650
		}
	}
	option = {
		name = "pf_per_events_9_option_2"
		trigger = { 
			NOT = { has_government_power = {
				mechanic_type = pf_per_centralization_mechanic
				power_type = pf_per_centralization
				value = 20
			}}
		}
		add_stability = 1
		add_country_modifier = {
			name = pf_per_drew_satrapy_revolt
			duration = 3650
		}
	}
	option = {
		name = "pf_per_events_9_option_3"
		trigger = { NOT = { satrapy = 1 } }
		add_stability = -3
		add_prestige = -100
		add_devotion = -50
		add_country_modifier = {
			name = pf_per_lost_satrapy_revolt
			duration = 3650
		}
	}
}

# # Mission Event: Allied to Zoroastrians
country_event = {
	id = pf_per_events.10
	title = "pf_per_events_10_title"
	desc = "pf_per_events_10_desc"
	picture = DIPLOMACY_eventPicture
	is_triggered_only = yes
	fire_only_once = yes

	immediate = {
		random_ally = {
			limit = { religion = zoroastrian }
			save_event_target_as = zoroastrian_ally
		}
	}

	option = {
		name = "pf_per_events_10_option_1"
		ai_chance = { factor = 0 }
		add_treasury = 100
	}
	
	option = {
		name = "pf_per_events_10_option_2"
		ai_chance = { factor = 0 }
		add_manpower = 2.5
	}
	
	option = {
		name = "pf_per_events_10_option_3"
		ai_chance = { factor = 100 }
		add_country_modifier = {
			name = pf_per_ally_talked
			duration = -1
			desc = pf_per_satrapy_revolt_until_end_tt
		}
	}
}

# Satrapy Revolt Disaster: Satrapy demands Manpower
country_event = {
	id = pf_per_events.11
	title = "pf_per_events_11_title"
	desc = "pf_per_events_11_desc"
	picture = NOBLE_ESTATE_DEMANDS_eventPicture
	is_triggered_only = yes
	
	trigger = {
		any_subject_country = {
			liberty_desire = 50
			NOT = { has_country_modifier = pf_per_satrapy_compromised }
		}
	}
	
	immediate = {
		random_subject_country = {
			limit = {
				liberty_desire = 50
				NOT = { has_country_modifier = pf_per_satrapy_compromised }
			}
			save_event_target_as = disobedient_satrap
		}
	}

	option = {
		name = "pf_per_events_11_option_1"
		ai_chance = { factor = 100 }

		if = {
			limit = { event_target:disobedient_satrap = { liberty_desire = 100 } }
			add_yearly_manpower = -1.2
		}
		else_if = {
			limit = { event_target:disobedient_satrap = { liberty_desire = 75 } }
			add_yearly_manpower = -0.9
		}
		else = {
			add_yearly_manpower = -0.6
		}

		event_target:disobedient_satrap = {
			add_country_modifier = {
				name = pf_per_satrapy_compromised
				duration = -1
				desc = "pf_per_satrapy_revolt_until_end_tt"
			}
			if = {
				limit = { has_country_modifier = pf_per_satrapy_refused }
				remove_country_modifier = pf_per_satrapy_refused
			}
		}
	}

	option = {
		name = "pf_per_events_11_option_2"
		ai_chance = { factor = 0 }
		event_target:disobedient_satrap = {
			add_country_modifier = {
				name = pf_per_satrapy_refused
				duration = -1
				desc = "pf_per_satrapy_revolt_until_end_tt"
			}
		}
	}
}

# Mission Event: Move Capital to Baghdad 
country_event = {
	id = pf_per_events.12
	title = "pf_per_events_12_title"
	desc = "pf_per_events_12_desc"
	picture = CITY_VIEW_eventPicture
	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = "pf_per_events_12_option_1"
		ai_chance = { factor = 0 }
		set_capital = 410
	}

	option = {
		name = "pf_per_events_12_option_2"
		ai_chance = { factor = 100 }
	}
}

# Centralization hits 0 event
country_event = {
	id = pf_per_events.13
	title = "pf_per_events_13_title"
	desc = "pf_per_events_13_desc"
	picture = COUNTRY_COLLAPSE_eventPicture
	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = "pf_per_events_13_option"
		ai_chance = { factor = 100 }
		add_stability = -3
		add_prestige = -100
		add_devotion = -100
		release_all_subjects = yes
		hidden_effect = {
			remove_estate_privilege = estate_nobles_pf_satrapy_expansion_plan
			remove_estate_privilege = estate_nobles_pf_satrapy_annexation_ban
			remove_estate_privilege = estate_nobles_pf_satrapy_exemption_from_conscription
		}
		set_country_flag = pf_per_centralization_collapsed
		add_government_reform = pf_collapsed_zoroastrian_theocracy
	}
}

# Centralization hits 100 event
country_event = {
	id = pf_per_events.14
	title = "pf_per_events_14_title"
	desc = "pf_per_events_14_desc"
	picture = GOOD_WITH_MONARCH_eventPicture
	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = "pf_per_events_14_option"
		ai_chance = { factor = 100 }
		add_stability = 1
		add_prestige = 50
		add_dip_power = 150
		set_country_flag = pf_per_centralization_completed
		add_government_reform = pf_centralized_zoroastrian_theocracy
	}
}

# Sack of Baghdad
country_event = {
	id = pf_per_events.15
	title = "pf_per_events_15_title"
	desc = "pf_per_events_15_desc"
	picture = NOT_DISCIPLINED_SOLDIERS_eventPicture
	fire_only_once = yes

	trigger = {
		tag = PER
		controls = 410
		SLC = { owns = 410 }
	}

	mean_time_to_happen = { days = 3 }

	option = {
		name = "pf_per_events_15_option"
		ai_chance = { factor = 100 }
		410 = {
			add_base_tax = -3
			add_base_production = -3
			add_base_manpower = -3
			add_devastation = 75
		}
		add_treasury = 200
	}
}

# Sack of Baghdad, SLC side
country_event = {
	id = pf_per_events.16
	title = "pf_per_events_16_title"
	desc = "pf_per_events_16_desc"
	picture = NOT_DISCIPLINED_SOLDIERS_eventPicture
	is_triggered_only = yes
	fire_only_once = yes

	major = yes
	major_trigger = { total_development = 100 }

	option = {
		name = "pf_per_events_16_option"
		ai_chance = { factor = 100 }
		tooltip = {
			410 = {
				add_base_tax = -3
				add_base_production = -3
				add_base_manpower = -3
				add_devastation = 75
			}
		}
		add_treasury = -200
	}
}

# Steppe Horde raids Satrapy
country_event = {
	id = pf_per_events.17
	title = "pf_per_events_17_title"
	desc = "pf_per_events_17_desc"
	picture = NOT_DISCIPLINED_SOLDIERS_eventPicture

	mean_time_to_happen = { months = 48 }

	trigger = {
		tag = PER
		NOT = { has_country_flag = pf_per_good_wall_built }
		any_subject_country = {
			any_neighbor_country = { has_reform = steppe_horde }
		}
	}

	immediate = {
		random_subject_country = {
			limit = {
				any_neighbor_country = { has_reform = steppe_horde }
			}
			save_event_target_as = raided_satrap
			hidden_effect = {
				every_owned_province = {
					limit = {
						any_neighbor_province = { 
							owner = { has_reform = steppe_horde }
						}
					}
					add_devastation = 10
				}
			}
		}
	}

	option = {
		name = "pf_per_events_17_option_1"
		ai_chance = { factor = 100 }
		add_treasury = -100
		event_target:raided_satrap = { add_treasury = 100 }
	}

	option = {
		name = "pf_per_events_17_option_2"
		ai_chance = { factor = 0 }
		event_target:raided_satrap = {
			add_country_modifier = {
				name = pf_per_ignored_satrapy
				duration = 1825
			}
		}
	}
}

# Satrapy Demands events: Develop Tax
country_event = {
	id = pf_per_events.18
	title = "pf_per_events_18_title"

	desc = {
		trigger = {
			NOT = { has_country_flag = pf_per_satrapy_demand_consequences_1 }
		}
		desc = "pf_per_events_18_desc_1"
	}

	desc = {
		trigger = {
			has_country_flag = pf_per_satrapy_demand_consequences_1
			NOT = { has_country_flag = pf_per_satrapy_demand_consequences_2 }
		}
		desc = "pf_per_events_18_desc_2"
	}

	desc = {
		trigger = {
			has_country_flag = pf_per_satrapy_demand_consequences_2
			NOT = { has_country_flag = pf_per_satrapy_demand_consequences_3 }
		}
		desc = "pf_per_events_18_desc_3"
	}

	desc = {
		trigger = {
			has_country_flag = pf_per_satrapy_demand_consequences_3
		}
		desc = "pf_per_events_18_desc_4"
	}

	
	picture = NOBLE_ESTATE_DEMANDS_eventPicture

	trigger = {
		NOT = { ai = yes }
		tag = PER
		has_country_flag = pf_per_had_satrapy_revolt
		NOT = { has_country_flag = pf_per_has_develop_tax_demand }
		any_subject_country = {
			NOT = { has_country_modifier = pf_per_overlord_rejected_demand }
			NOT = { has_country_modifier = pf_per_overlord_failed_demand }
			NOT = { has_country_modifier = pf_per_overlord_rejected_demand_reduced }
			NOT = { has_country_modifier = pf_per_overlord_failed_demand_reduced }
			NOT = { has_country_modifier = pf_per_overlord_filled_demand }
		}
	}

	mean_time_to_happen = {
		months = 108
		modifier = {
			factor = 1.33
			OR = {
				adm_tech = 5
				dip_tech = 5
				mil_tech = 5
			}
		}

		modifier = {
			factor = 1.25
			OR = {
				adm_tech = 7
				dip_tech = 7
				mil_tech = 7
			}
		}

		modifier = {
			factor = 2
			has_country_flag = pf_per_satrapy_demand_consequences_1
		}

		modifier = {
			factor = 2
			has_country_flag = pf_per_satrapy_demand_consequences_2
		}

		modifier = {
			factor = 2
			has_country_flag = pf_per_satrapy_demand_consequences_3
		}
	}

	immediate = {
		set_country_flag = pf_per_has_develop_tax_demand
		random_subject_country = {
			limit = { 
				NOT = { has_country_modifier = pf_per_overlord_rejected_demand }
				NOT = { has_country_modifier = pf_per_overlord_failed_demand }
				NOT = { has_country_modifier = pf_per_overlord_rejected_demand_reduced }
				NOT = { has_country_modifier = pf_per_overlord_failed_demand_reduced }
				NOT = { has_country_modifier = pf_per_overlord_filled_demand }
			}
			save_event_target_as = province_to_tax_dev_owner
			hidden_effect = {
				random_owned_province = {
					save_event_target_as = province_to_tax_dev
					export_to_variable = {
						which = pfPerProvinceTaxDev
						value = base_tax
					}
					change_variable = {
						which = pfPerProvinceTaxDev
						value = 2
					}
				}
			}
		}
	}

	# Agree to dev province
	option = {
		name = "pf_per_events_18_option_1"
		ai_chance = { factor = 100 }
		goto = province_to_tax_dev
		custom_tooltip = pf_per_events_18_tt
		country_event = {
			id = pf_per_events.28
			days = 36#5
		}
	}

	# Refuse to dev province
	option = {
		name = "pf_per_events_18_option_2"
		ai_chance = { factor = 0 }
		event_target:province_to_tax_dev_owner = {
			if = {
				limit = { NOT = { has_country_flag = pf_per_satrapy_demand_consequences_1 } }
				add_country_modifier = {
					name = pf_per_overlord_rejected_demand
					duration = 3650
				}
			}
			else_if = {
				limit = { NOT = { has_country_flag = pf_per_satrapy_demand_consequences_2 } }
				add_country_modifier = {
					name = pf_per_overlord_rejected_demand
					duration = 1825
				}
			}

			else_if = {
				limit = { NOT = { has_country_flag = pf_per_satrapy_demand_consequences_3 } }
				add_country_modifier = {
					name = pf_per_overlord_rejected_demand_reduced
					duration = 1825
				}
			}
		}
		clr_country_flag = pf_per_has_develop_tax_demand
	}
}

# Satrapy Demands Follow up Events: Develop Tax
country_event = {
	id = pf_per_events.28
	title = "pf_per_events_28_title"

	immediate = {
		hidden_effect = {
			event_target:province_to_tax_dev = {
				export_to_variable = {
					which = pfPerProvinceTaxDevCheck
					value = base_tax
				}
			}
		}
	}

	after = {
		clr_country_flag = pf_per_has_develop_tax_demand
	}
	desc = {
		# Succeeded
		trigger = {
			event_target:province_to_tax_dev = {
				check_variable = {
					which = pfPerProvinceTaxDevCheck
					which = pfPerProvinceTaxDev
				}
			}
		}
		desc = "pf_per_events_28_desc_1"
	}

	desc = {
		# Failed
		trigger = {
			event_target:province_to_tax_dev = {
				NOT = { 
					check_variable = {
						which = pfPerProvinceTaxDevCheck
						which = pfPerProvinceTaxDev
					}
				}
			}
		}
		desc = "pf_per_events_28_desc_2"
	}
	picture = NOBLE_ESTATE_DEMANDS_eventPicture
	is_triggered_only = yes

	# Succeeded
	option = {
		name = "pf_per_events_28_option_1"
		ai_chance = { factor = 100 }
		
		trigger = {
			event_target:province_to_tax_dev = {
				check_variable = {
					which = pfPerProvinceTaxDevCheck
					which = pfPerProvinceTaxDev
				}
			}
		}

		event_target:province_to_tax_dev_owner = {
			if = {
				limit = { NOT = { has_country_flag = pf_per_satrapy_demand_rewards_2 } }
				add_country_modifier = {
					name = pf_per_overlord_filled_demand
					duration = 3650
				}
			}
			else = {
				add_country_modifier = {
					name = pf_per_overlord_filled_demand
					duration = 7300
				}
			}
		}

		if = {
			limit = { NOT = { has_country_flag = pf_per_satrapy_demand_rewards_1 } }
			add_prestige = 10
		}

		else_if = {
			limit = { NOT = { has_country_flag = pf_per_satrapy_demand_rewards_2 } }
			add_treasury = 50
		}

		else_if = {
			limit = { NOT = { has_country_flag = pf_per_satrapy_demand_rewards_3 } }
			add_treasury = 150
		}

		else = {
			add_adm_power = 25
			add_dip_power = 25
			add_mil_power = 25
		}

		hidden_effect = {
			change_variable = {
				which = pfPerSatrapyDemandsFilled
				value = 1
			}
		}
	}

	# Failed
	option = {
		name = "pf_per_events_28_option_2"
		ai_chance = { factor = 100 }

		trigger = {
			event_target:province_to_tax_dev = {
				NOT = { 
					check_variable = {
						which = pfPerProvinceTaxDevCheck
						which = pfPerProvinceTaxDev
					}
				}
			}
		}

		event_target:province_to_tax_dev_owner = {
			if = {
				limit = { NOT = { has_country_flag = pf_per_satrapy_demand_consequences_1 } }
				add_country_modifier = {
					name = pf_per_overlord_failed_demand
					duration = 3650
				}
			}
			else_if = {
				limit = { NOT = { has_country_flag = pf_per_satrapy_demand_consequences_2 } }
				add_country_modifier = {
					name = pf_per_overlord_failed_demand
					duration = 1825
				}
			}

			else = {
				add_country_modifier = {
					name = pf_per_overlord_failed_demand_reduced
					duration = 1825
				}
			}
		}
	}
}